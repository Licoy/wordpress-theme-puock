const puockGlobalData={loads:{}},TYPE_PRIMARY="primary",TYPE_WARNING="warning",TYPE_DANGER="danger",TYPE_SUCCESS="success",TYPE_INFO="info";class Puock{data={tag:"puock",pc:!0,params:{home:null,use_post_menu:!1,is_single:!1,is_pjax:!1,vd_comment:!1,vd_gt_id:null,vd_type:null,main_lazy_img:!1,link_blank_open:!1,async_view_id:null,mode_switch:!1,async_view_generate_time:null,off_img_viewer:!1,off_code_highlighting:!1},comment:{loading:!1,time:5,val:null,replyId:null},instance:{},modalStorage:{}};onceInit(){this.pageInit(),$(document).on("click",".fancybox",()=>!1),$(document).on("click","#rb-float-actions>div",t=>{const e=$(this.ct(t));var a,t=e.data("to");t?(a="top"===t?0:window.document.body.clientHeight,$("html,body").stop().animate({scrollTop:a},50)):(a=e.data("to-area"))&&this.gotoArea(a)}),$(document).on("click",".colorMode",()=>{this.modeChange(null,!0)}),$(document).on("click",".captcha",t=>{this.loadCommentCaptchaImage($(this.ct(t)))}),this.data.params.is_pjax&&this.instanceClickLoad(),this.initBasicDOMEvent(),this.sidebarMenuEventInit(),this.searchInit(),this.eventShareStart(),this.modeInit(),this.registerMobileMenu(),this.registerModeChangeEvent(),this.eventCommentPageChangeEvent(),this.eventCommentPreSubmit(),this.eventSmiley(),this.eventOpenCommentBox(),this.eventCloseCommentBox(),this.eventSendPostLike(),this.eventLoadMore(),this.eventPostMainBoxResize(),this.swiperOnceEvent(),this.initModalToggle(),this.detectDevice(),window.addEventListener("resize",()=>this.detectDevice()),layer.config({shade:.5}),console.log("\n %c Puock Theme %c https://github.com/Licoy/wordpress-theme-puock \n\n","color:#f1ab0e;background:#030307;padding:5px 0;border-top-left-radius:8px;border-bottom-left-radius:8px","background:#aa80ff;padding:5px 0;border-top-right-radius:8px;border-bottom-right-radius:8px")}pageInit(){this.loadParams(),this.pageChangeInit(),this.data.params.is_single&&this.data.params.use_post_menu&&this.generatePostMenuHTML()}instanceClickLoad(){InstantClick.init("mousedown"),InstantClick.go=t=>{const e=document.createElement("a");e.href=t,document.body.appendChild(e),e.click()},InstantClick.on("change",t=>{this.loadParams(),this.pageChangeInit()}),this.loadCommentInfo()}ct(t){return t.currentTarget}detectDevice(){var t=window.innerWidth;this.data.pc=768<=t}initBasicDOMEvent(){$(document).on("click",".toggle-el-show-hide",t=>{const e=$(this.ct(t)),a=$(e.attr("data-target")),o=$(e.attr("data-self"));t=e.attr("data-modal-title");a.hasClass("d-none")?(o.addClass("d-none"),a.removeClass("d-none")):(o.removeClass("d-none"),a.addClass("d-none")),t&&e.closest(".modal").find(".modal-title").text(t)}),$(document).on("submit",".ajax-form",t=>{t.preventDefault();const n=$(this.ct(t));var e=n.find(":input");if(0===e.length)return this.toast("表单元素为空",TYPE_DANGER),!1;for(let t=0;t<e.length;t++){const o=$(e[t]);if(void 0!==o.attr("data-required")&&""===o.val())return this.toast(o.attr("data-tip")||o.attr("placeholder"),TYPE_WARNING),!1}t=n.data("validate");const a=(t={})=>{var e=n.attr("action"),a=n.attr("method"),t=this.parseFormData(n,t);const o=n.attr("data-success"),s=n.attr("data-error"),i=this.startLoading();$.ajax({url:e,method:a,data:t,dataType:"json",success:t=>{if(this.stopLoading(i),0===t.code||t.success){if(this.toast(t.msg||o,TYPE_SUCCESS),void 0===n.data("no-reset")&&n.trigger("reset"),t.data){const e=t.data;e.action&&setTimeout(()=>{"reload"===e.action&&this.goUrl(window.location.href)},500)}}else this.toast(t.msg||t.data||s,TYPE_DANGER),this.loadCommentCaptchaImage(n,!0)},error:t=>{this.stopLoading(i),this.toast("请求错误："+t.statusText,TYPE_DANGER),this.loadCommentCaptchaImage(n,!0)}})};return"gt"===t?this.gt.validate(t=>{a(t)}):a(),!1})}pageLinkBlankOpenInit(){this.data.params.link_blank_open&&$(".entry-content").find("a").each((t,e)=>{$(e).attr("target","blank")})}loadCommentCaptchaImage(t,e=!1){e?t.find(".captcha").each((t,e)=>{this.loadCommentCaptchaImage($(e))}):(e=t.attr("src")+"&t="+(new Date).getTime(),t.attr("src",e),t.parent().parent().find(".captcha-input").each((t,e)=>{$(e).val("")}))}searchInit(){const t=()=>{const t=$("#search");var e="true"===t.attr("data-open"),a=e?"Out":"In";t.attr("class","animated fade"+a+"Left"),$("#search-backdrop").attr("class","modal-backdrop animated fade"+a+"Right"),t.attr("data-open",!e),e||t.find("input").focus()};$(document).on("click",".search-modal-btn",()=>{t()}),$(document).on("click","#search-backdrop",()=>{t()}),$(document).on("submit",".global-search-form",t=>{t.preventDefault();const e=$(this.ct(t));this.goUrl(e.attr("action")+"/?"+e.serialize())})}goUrl(t){var e=-1!==t.indexOf("/wp-login.php")||-1!==t.indexOf("/wp-admin");this.data.params.is_pjax&&!e?InstantClick.go(t):window.location.href=t}gt={validate:(t=void 0)=>{this.data.instance.gt_callback=t,this.data.instance.gt.showCaptcha()}};validateInit(){"gt"===this.data.params.vd_type&&initGeetest4({captchaId:this.data.params.vd_gt_id,product:"bind"},t=>{(this.data.instance.gt=t).onSuccess(()=>{var t=this.data.instance.gt.getValidate();this.data.instance.gt_callback&&this.data.instance.gt_callback(t)})})}rippleInit(){var t={debug:!1,on:"mousedown",opacity:.4,color:"var(--pk-c-light)",multi:!1,duration:.6,rate:function(t){return t},easing:"linear"};jQuery.ripple(".btn",t),jQuery.ripple(".ww",t)}eventShareStart(){$(document).on("click",".share-to",e=>{e=$(this.ct(e)).attr("data-id");if("wx"!==e){var a=window.location.href,o=$("#post-title").text();let t=null;switch(e){case"wb":t="https://service.weibo.com/share/share.php?pic=&title="+o+"&url="+a+"&appkey=";break;case"qzone":t="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+o+"&url="+a;break;case"tw":t="https://twitter.com/intent/tweet?url="+a;break;case"fb":t="https://www.facebook.com/sharer.php?u"+a}t&&window.open(t,"_blank")}})}sidebarMenuEventInit(){let i=null;$(document).on("touchend",".post-menu-toggle",t=>{t.preventDefault(),this.toggleMenu()}),$(document).on("click",".post-menu-toggle",()=>{this.toggleMenu()}),$(document).on("click",".post-menu-item",t=>{const e=$(this.ct(t));t=e.attr("data-id");if(i){const o=e.parents("ul");let t="post-menu-sub-"+i;for(;;){if(void 0===t)break;const s=$("."+t);if(void 0===s.attr("class")||o.attr("class")===s.attr("class"))break;s.hide(),t=s.parents("ul").attr("class")}}const a=$(".post-menu-sub-"+t);0<a.length&&(a.show(),i=t)}),$(document).on("click",".pk-menu-to",t=>{var e=$(this.ct(t)).attr("href"),t=$("#header").innerHeight();return $("html, body").stop().animate({scrollTop:$(e).offset().top-t-10+"px"},{duration:50,easing:"swing"}),this.data.pc||this.toggleMenu(),!1})}toggleMenu(){const t=$("#post-menus"),e=$("#post-menu-state");var a="data-open";e.hasClass(a)?(t.removeClass("show"),e.removeClass(a)):(t.addClass("show"),e.addClass(a))}lazyLoadInit(t=null,e=".lazy"){if(window.puockLazyLoader)t?window.puockLazyLoader.update(t):window.puockLazyLoader.update();else if(window.lozad){const a=lozad([e,'img[data-lazy="true"]'],{rootMargin:"10px 0px",threshold:.1,enableAutoReload:!0,load:t=>{const e=t.getAttribute("data-src");!e||"null"===e||""===e||e.includes("null")||e.includes("^/")?console.warn("Invalid data-src in lozad:",e,t):(t.classList.add("loaded"),t.src=e)}});a.observe()}}loadParams(){this.data.params=puock_metas,this.data.commentVd="on"===this.data.params.vd_comment}initReadProgress(){const e=$("#page-read-progress .progress-bar");document.addEventListener("scroll",()=>{const t=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;e.attr("style","width:"+t.toFixed(0)+"%")})}tooltipInit(t=$('[data-bs-toggle="tooltip"]')){[...t].map(t=>{new bootstrap.Tooltip(t,{placement:"bottom",trigger:"hover"})})}pageChangeInit(){this.initReadProgress(),this.modeInit(),this.loadCommentInfo(),this.katexParse(),this.initCodeHighlight(),this.pageLinkBlankOpenInit(),this.initGithubCard(),this.keyUpHandle(),this.loadHitokoto(),this.asyncCacheViews(),this.swiperInit(),this.validateInit(),this.rippleInit(),this.data.params.use_post_menu&&this.generatePostMenuHTML(),this.tooltipInit(),this.data.params.off_img_viewer||jQuery(".entry-content").viewer({navbar:!1,url:this.data.params.main_lazy_img?"data-src":"src"});const t=new ClipboardJS(".pk-copy",{text:t=>{const e=$(t);var a=e.attr("data-cp-input"),o=e.attr("data-cp-el"),s=e.attr("data-cp-val"),t=e.attr("data-cp-func");let i;return i=void 0!==t?window[t](e):void 0!==s?s:void 0!==a?$(a).val():(void 0!==o?$(o):e).text(),i}});t.on("success",t=>{t=$(t.trigger).attr("data-cp-title")||"";this.toast(`复制${t}成功`)}),t.on("error",t=>{t=$(t.trigger).attr("data-cp-title")||"";this.toast(`复制${t}失败`,TYPE_DANGER)}),this.lazyLoadInit(),$("#post-main, #sidebar").theiaStickySidebar({additionalMarginTop:20})}getPostMenuStructure(){let t=[];for(var e of $(".entry-content").find("h1,h2,h3,h4,h5,h6"))t.push({name:$(e).text().trim(),level:e.tagName.toLowerCase(),id:$(e).attr("id")});return t}generatePostMenuHTML(){const d=this.getPostMenuStructure();if(0<d.length){let e="<ul>";if(0<d.length){const c=[];let n=6;const m=t=>(t.children=[],t),h=t=>(t.levelInt=parseInt(t.level.replace("h","")),t.levelInt<n&&(n=t.levelInt),t.levelInt);var t=m(d[0]);const p=h(t);let l=0;const g=(t,e)=>{var a=u(t,e);return null!=a&&h(a)===h(t)?g(a,e):a},u=(t,e)=>{if(l>=d.length-1)return null;var a=++l,o=m(d[a]),s=h(t),a=h(o);let i=null;if(a===p)c.push(o),i=u(o,null);else if(s<a)t.children.push(o),i=u(o,t);else{if(a!==s||null==e)return o;e.children.push(o),i=u(o,e)}return null!=i&&h(i)===s&&(e.children.push(i),i=g(i,e)),i};for(c.push(t);;){var a=u(t,null);if(null==a)break;u(a,null)}let r=0;const f=(t,e)=>{++r;var a=r,o=10*(t.levelInt-n);let s=`<li data-level="${t.levelInt}" style='padding-left:${o}px'>`;if(s+=`<a class='pk-menu-to a-link t-w-400 t-md post-menu-item' data-parent="${e}" data-id="${a}" href='#${t.id}'><i class='fa ${0<t.children.length?"fa-angle-right":"fa-file-invoice"} t-sm c-sub mr-1'></i> ${t.name}</a>`,0<t.children.length){s+=`<ul class="post-menu-sub-${a}" data-parent="${e+1}">`;for(var i of t.children)s+=f(i,a);s+="</ul>"}return s+="</li>",s};c.forEach(t=>{e+=f(t,r)})}e+="</ul>",$("#post-menu-content-items").html(e),$(".post-menus-box").show()}}initCodeHighlight(t=!0,e="body"){if(!this.data.params.off_code_highlighting&&void 0!==window.hljs&&(window.hljs.configure({ignoreUnescapedHTML:!0}),$(e).find("pre").each((t,e)=>{const a=$(e),o=a.children("code")?a.children("code").attr("class"):void 0;o&&(-1!==o.indexOf("katex")||-1!==o.indexOf("latex")||-1!==o.indexOf("flowchart")||-1!==o.indexOf("flow")||-1!==o.indexOf("seq")||-1!==o.indexOf("math"))||a.attr("id")||(a.attr("id","hljs-item-"+t),a.before("<div class='pk-code-tools' data-pre-id='hljs-item-"+t+"'><div class='dot'><i></i><i></i><i></i></div><div class='actions'><div><i class='i fa fa-copy cp-code' data-clipboard-target='#hljs-item-"+t+"'></i></div></div></div>"),window.hljs.highlightBlock(e),window.hljs.lineNumbersBlock(e))}),t)){const a=new ClipboardJS(".cp-code");a.on("success",t=>{t.clearSelection(),this.toast("已复制到剪切板")})}}localstorageToggle(t,e=null){return null!=e?localStorage.setItem(t,e):localStorage.getItem(t)}loadCommentInfo(){var t=this.localstorageToggle("comment_author"),e=this.localstorageToggle("comment_email"),a=this.localstorageToggle("comment_url");null!=t&&null!=e&&($("#comment_author").val(t),$("#comment_email").val(e),$("#comment_url").val(a))}setCommentInfo(){this.localstorageToggle("comment_author",$("#comment_author").val()),this.localstorageToggle("comment_email",$("#comment_email").val()),this.localstorageToggle("comment_url",$("#comment_url").val())}asyncCacheViews(){this.data.params.async_view_id&&this.data.params.async_view_generate_time&&10<(new Date).getTime()/1e3-this.data.params.async_view_generate_time&&$.post(this.data.params.home+"/wp-admin/admin-ajax.php?action=async_pk_views",{id:this.data.params.async_view_id},t=>{0!==t.code?console.error(t.msg):$("#post-views").text(t.data)},"json").fail(t=>{console.error(t)})}modeInit(){this.modeChange()}modeChange(t=null,e=!1){const a=$("body");"string"==typeof t&&(t="true"===t);let s=Cookies.get("mode")||"auto";null===t&&(t="light"===s,"auto"===s&&(t=!window.matchMedia("(prefers-color-scheme:dark)").matches)),e&&(t="light"===s?!(s="dark"):"dark"===s?(s="auto",!window.matchMedia("(prefers-color-scheme:dark)").matches):(s="light",!0),console.log(s,t));e="d-none";t?($("#logo-light").removeClass(e),$("#logo-dark").addClass(e)):($("#logo-dark").removeClass(e),$("#logo-light").addClass(e)),$(".colorMode").each((t,e)=>{const a=$(e);let o;o="i"===a.prop("localName")?a:$(a).find("i"),o&&o.removeClass("fa-sun").removeClass("fa-moon").removeClass("fa-circle-half-stroke").addClass("auto"===s?"fa-circle-half-stroke":"light"===s?"fa-sun":"fa-moon")}),a.removeClass(this.data.tag+"-auto"),a.removeClass(t?this.data.tag+"-dark":this.data.tag+"-light"),a.addClass(t?this.data.tag+"-light":this.data.tag+"-dark"),Cookies.set("mode",s)}modeChangeListener(){"auto"===Cookies.get("mode")&&this.modeChange(!window.matchMedia("(prefers-color-scheme:dark)").matches)}registerModeChangeEvent(){if(this.data.params.mode_switch)try{window.matchMedia("(prefers-color-scheme:dark)").addEventListener("change",()=>{this.modeChangeListener()})}catch(t){window.matchMedia("(prefers-color-scheme:dark)").addListener(()=>{this.modeChangeListener()})}}infoToastShow(t,e="提示"){const a=$("#infoToast");$("#infoToastTitle").html(e),$("#infoToastText").html(t),a.modal("show")}registerMobileMenu(){const t=t=>{"string"!=typeof t&&(t="Out"),$("#mobile-menu").attr("class","animated fade"+t+"Left"),$("#mobile-menu-backdrop").attr("class","modal-backdrop animated fade"+t+"Right")};$(document).on("click","#mobile-menu-backdrop",t),$(document).on("click",".mobile-menu-close",t),$(document).on("click",".mobile-menu-s",()=>{t("In")})}gotoArea(t,e=50){t=$(t).offset().top-$("#header").height()-10;$("html,body").stop().animate({scrollTop:t},e)}pushAjaxCommentHistoryState(t){history.pushState({foo:"bar"},"page 2",t)}eventCommentPageChangeEvent(){$(document).on("click",".comment-ajax-load a.page-numbers",t=>{const e=$("#post-comments"),a=$("#comment-ajax-load");$("#comment-cancel").click();let o=$(this.ct(t)).attr("href");return this.pushAjaxCommentHistoryState(o),e.html(" "),this.gotoArea("#comments"),a.removeClass("d-none"),$.post(o,{},t=>{e.html($(t).find("#post-comments")),a.addClass("d-none"),this.initCodeHighlight(!1),this.lazyLoadInit(e)}).fail(()=>{location=o}),!1})}parseFormData(t,e={}){var a=t.serializeArray();const o={...e};for(let t=0;t<a.length;t++)o[a[t].name]=a[t].value;return jQuery.param(o)}eventCommentPreSubmit(){$(document).on("submit","#comment-form",e=>{if(e.preventDefault(),"0"!==$("#comment-logged").val()||""!==$.trim($("#comment_author").val())&&""!==$.trim($("#comment_email").val()))if(""!==$.trim($("#comment").val())){if(this.data.params.vd_comment){if("img"!==this.data.params.vd_type)return void this.gt.validate(t=>{this.commentSubmit(this.ct(e),t)});if(""===$.trim($("#comment-vd").val()))return void this.toast("验证码不能为空",TYPE_WARNING)}this.commentSubmit(this.ct(e))}else this.toast("评论内容不能为空",TYPE_WARNING);else this.toast("评论信息不能为空",TYPE_WARNING)})}commentSubmit(t,e={}){var a=$("#comment-form").attr("action");this.commentFormLoadStateChange();const o=$(t);$.ajax({url:a,data:this.parseFormData(o,e),type:o.attr("method"),success:a=>{if(this.toast("评论已提交成功",TYPE_SUCCESS),this.loadCommentCaptchaImage($(".comment-captcha")),$("#comment-vd").val(""),$("#comment").val(""),null!=this.data.comment.replyId){let t=$("#comment-"+this.data.comment.replyId),e=t.find(".children");0===e.length&&(t.append("<ul class='children'></ul>"),e=t.find(".children")),e.prepend(a)}else $("#post-comments").prepend(a);$("#comment-cancel").click(),this.commentFormLoadStateChange(),this.setCommentInfo()},error:t=>{let e=null;try{e=JSON.parse(t.responseText)}catch(t){}this.commentFormLoadStateChange(),e?(this.toast(e.msg,TYPE_DANGER),e.refresh_code&&this.loadCommentCaptchaImage($(".comment-captcha"))):this.toast(t.responseText,TYPE_DANGER)}})}commentFormLoadStateChange(){const t=$("#comment-submit");this.data.comment.loading?(t.html("请等待"+this.data.comment.time+"s"),this.data.comment.val=setInterval(()=>{this.data.comment.time<=1?(clearInterval(this.data.comment.val),t.html("提交评论"),t.removeAttr("disabled"),this.data.comment.time=5):(--this.data.comment.time,t.html("请等待"+this.data.comment.time+"s"))},1e3)):(t.html('<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>提交中...'),t.attr("disabled",!0)),this.data.comment.loading=!this.data.comment.loading}eventOpenCommentBox(){$(document).on("click","[id^=comment-reply-]",t=>{if(this.data.comment.replyId=$(this.ct(t)).attr("data-id"),""!==$.trim(this.data.comment.replyId)){const e=$("#comment-form"),a=$("#comment-box-"+this.data.comment.replyId);e.addClass("box-sw"),a.removeClass("d-none").append(e),$("#comment-cancel").removeClass("d-none"),$("#comment").val(""),$("#comment_parent").val(this.data.comment.replyId)}else this.toast("结构有误",TYPE_DANGER)})}eventCloseCommentBox(){$(document).on("click","#comment-cancel",()=>{const t=$("#comment-form"),e=$("#comment-box-"+this.data.comment.replyId);t.removeClass("box-sw"),e.addClass("d-none"),$("#comment-form-box").append(t),$("#comment-cancel").addClass("d-none"),this.data.comment.replyId=null})}eventSendPostLike(){let o=0;$(document).on("click","#post-like",t=>{var e=(new Date).getTime();if(e-o<3e3)this.toast("操作过于频繁",TYPE_WARNING);else{o=e;const a=$(this.ct(t));t=a.attr("data-id");$.post("/wp-admin/admin-ajax.php",{action:"puock_like",um_id:t,um_action:"like"},t=>{0===t.e?(a.find("span").html(t.d),a.addClass("bg-primary text-light")):this.toast(t.t)},"json").fail(()=>{this.toast("点赞异常",TYPE_DANGER)})}})}eventLoadMore(){$(document).on("click","#load-more-btn",t=>{const a=$(this.ct(t));t=a.data("paged");const o=$("#posts > div:first");a.prop("disabled",!0).html('<i class="fa fa-spinner fa-spin"></i> 加载中...'),$.post("/wp-admin/admin-ajax.php",{action:"pk_load_more_posts",paged:t},t=>{if(0===t.code){const e=$(t.data.html);e.hide(),o.append(e),e.fadeIn(),a.data("paged",t.data.paged),t.data.has_more?a.prop("disabled",!1).html('<i class="fa fa-plus"></i> 加载更多'):a.remove(),this.lazyLoadInit(e),this.tooltipInit(e.find('[data-bs-toggle="tooltip"]'))}else this.toast(t.msg||"加载失败",TYPE_DANGER),a.prop("disabled",!1).html('<i class="fa fa-plus"></i> 加载更多')},"json").fail(()=>{this.toast("加载异常",TYPE_DANGER),a.prop("disabled",!1).html('<i class="fa fa-plus"></i> 加载更多')})})}eventSmiley(){$(document).on("click",".smiley-img",t=>{const e=$("#comment");e.val(e.val()+" "+$(this.ct(t)).attr("data-id")+" "),layer.closeAll()})}startLoading(){return layer.load(0,{shade:[.5,"#000"]})}stopLoading(t=null){layer.close(t)}getRemoteHtmlNode(t,e){const a=this.startLoading();$.ajax({url:t,type:"GET",success:t=>{this.stopLoading(a),e(t)},error:t=>{console.error(t),this.stopLoading(a),this.toast("获取内容节点数据失败",TYPE_DANGER)}})}initModalToggle(){$(document).on("click",".pk-modal-toggle",t=>{const e=$(this.ct(t)),a=void 0!==e.data("no-title"),o=void 0!==e.data("no-padding"),s=e.attr("title")||e.data("title")||"提示";t=e.data("url");const i=e.data("once-load"),n=SparkMD5.hash(t);i&&this.data.modalStorage[n]?this.modalLoadRender(n,this.data.modalStorage[n],s,a,o):this.getRemoteHtmlNode(t,t=>{i&&(this.data.modalStorage[n]||(this.data.modalStorage[n]=t)),this.modalLoadRender(n,t,s,a,o)})})}modalLoadRender(t,e,a,o,s){t="pk-modal-"+t;layer.open({type:1,title:!o&&a,content:`<div id="${t}" style='${s?"":"padding: 20px"}' class='fs14'>${e}</div>`,shadeClose:!0});const i=$("#"+t);this.lazyLoadInit(i),this.tooltipInit(i.find('[data-bs-toggle="tooltip"]'))}eventPostMainBoxResize(){$(document).on("click",".post-main-size",()=>{const t=$("#post-main"),e=$("#sidebar"),a=t.hasClass("col-lg-8");t.removeClass(a?"col-lg-8":"col-lg-12"),t.addClass(a?"col-lg-12":"col-lg-8"),a?e.removeClass("d-lg-block"):e.addClass("d-lg-block")})}katexParse(){return}katexItemParse(e){var t=e.text(),a=e.get(0);if(0===e.parent("code").length)try{katex.render(t,a)}catch(t){e.html("<span class='err'>"+t)}}initGithubCard(){$.each($(".github-card"),(t,e)=>{const a=$(e),o=a.attr("data-repo");o&&$.get("https://api.github.com/repos/"+o,t=>{var e=`class="hide-hover" href="${t.html_url}" target="_blank" rel="noreferrer"`;a.html(`<div class="card-header"><i class="fa-brands fa-github"></i><a ${e}>${t.full_name}</a></div>
                    <div class="card-body">${t.description}</div>
                    <div class="card-footer">
                    <div class="row">
                    <div class="col-4"><i class="fa-regular fa-star"></i><a ${e}>${t.stargazers_count}</a></div>
                    <div class="col-4"><i class="fa-solid fa-code-fork"></i><a ${e}>${t.forks}</a></div>
                    <div class="col-4"><i class="fa-regular fa-eye"></i><a ${e}>${t.subscribers_count}</a></div>
                    </div>
                    </div>
                `),a.addClass("loaded")},"json").fail(t=>{a.html(`<div class="alert alert-danger"><i class="fa fa-warning"></i>&nbsp;请求Github项目详情异常：${o}</div>`)})})}keyUpHandle(){const a=$(".single-next-or-pre");a&&(window.onkeyup=function(e){if("BODY"===e.target?.tagName){let t=null;switch(e.key){case"ArrowLeft":t=a.find("a[rel='prev']").attr("href");break;case"ArrowRight":t=a.find("a[rel='next']").attr("href")}t&&(window.location=t)}})}swiperInit(){$("[data-swiper='init']").each((t,e)=>{const a=$(e);var o=a.attr("data-swiper-class"),e=a.attr("data-swiper-args");let s={};e&&(s=JSON.parse(e)),new Swiper("."+o,s)})}swiperOnceEvent(){$(document).on("click",".swiper-slide a",t=>{this.data.params.is_pjax&&(t.preventDefault(),this.goUrl(t.currentTarget.href))})}loadHitokoto(){setTimeout(()=>{$(".widget-puock-hitokoto").each((t,e)=>{const a=$(e);e=a.attr("data-api")||"https://v1.hitokoto.cn/";$.get(e,t=>{a.find(".t").text(t.hitokoto??t.content??"无内容"),a.find(".f").text(t.from),a.find(".fb").removeClass("d-none")},"json").fail(t=>{console.error(t),a.find(".t").text("加载失败："+t.responseText||t),a.remove(".fb")})})},300)}toast(t,e=TYPE_PRIMARY,a={}){a=Object.assign({duration:2600,close:!1,position:"right",gravity:"bottom",offset:{},className:"t-"+e},a);const o=Toastify({text:t,...a});return o.showToast(),o}}jQuery(()=>{void 0===window.$&&(window.$=jQuery),window.Puock=new Puock,window.Puock.onceInit()});